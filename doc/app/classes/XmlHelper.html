<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: XmlHelper</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">XmlHelper</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/lib/xml_helper_rb.html">
                lib/xml_helper.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">



   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000195">escape_builder_xml</a>&nbsp;&nbsp;
      <a href="#M000193">escape_double_quotes</a>&nbsp;&nbsp;
      <a href="#M000194">escape_single_quotes</a>&nbsp;&nbsp;
      <a href="#M000192">escape_xml_attribute_values</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000195" class="method-detail">
        <a name="M000195"></a>

        <div class="method-heading">
          <a href="#M000195" class="method-signature">
          <span class="method-name">escape_builder_xml</span><span class="method-args">(xml_to_escape)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
The builder also encloses attribute values in double quotes. We will
replace them with single quotes.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000195-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000195-source">
<pre>
    <span class="ruby-comment cmt"># File lib/xml_helper.rb, line 45</span>
45:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">XmlHelper</span>.<span class="ruby-identifier">escape_builder_xml</span>(<span class="ruby-identifier">xml_to_escape</span>)
46:     <span class="ruby-comment cmt"># Hash containing all the required conversions</span>
47:       <span class="ruby-identifier">conversions</span> = {
48:       <span class="ruby-regexp re">%r{&quot;}</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">'\''</span>
49:      }  
50:       <span class="ruby-identifier">escaped_xml</span> = <span class="ruby-identifier">xml_to_escape</span>
51:       <span class="ruby-identifier">conversions</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span><span class="ruby-operator">|</span>
52:           <span class="ruby-identifier">escaped_xml</span> = <span class="ruby-identifier">escaped_xml</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>)
53:         <span class="ruby-keyword kw">end</span>  
54:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">escaped_xml</span>
55:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000193" class="method-detail">
        <a name="M000193"></a>

        <div class="method-heading">
          <a href="#M000193" class="method-signature">
          <span class="method-name">escape_double_quotes</span><span class="method-args">(str_to_escape)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
This function escapes the double quotes
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000193-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000193-source">
<pre>
    <span class="ruby-comment cmt"># File lib/xml_helper.rb, line 20</span>
20:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">XmlHelper</span>.<span class="ruby-identifier">escape_double_quotes</span>(<span class="ruby-identifier">str_to_escape</span>)
21:     <span class="ruby-comment cmt"># Hash containing the required conversion</span>
22:     <span class="ruby-identifier">conversions</span> = {
23:        <span class="ruby-regexp re">%r{&quot;}</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">'&amp;quot;'</span>
24:     }  
25:     <span class="ruby-identifier">escaped_str</span> = <span class="ruby-identifier">str_to_escape</span>
26:     <span class="ruby-identifier">conversions</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span><span class="ruby-operator">|</span>
27:       <span class="ruby-identifier">escaped_str</span> = <span class="ruby-identifier">escaped_str</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>)
28:     <span class="ruby-keyword kw">end</span>  
29:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">escaped_str</span>
30:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000194" class="method-detail">
        <a name="M000194"></a>

        <div class="method-heading">
          <a href="#M000194" class="method-signature">
          <span class="method-name">escape_single_quotes</span><span class="method-args">(str_to_escape)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
This function escapes the single quotes
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000194-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000194-source">
<pre>
    <span class="ruby-comment cmt"># File lib/xml_helper.rb, line 32</span>
32:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">XmlHelper</span>.<span class="ruby-identifier">escape_single_quotes</span>(<span class="ruby-identifier">str_to_escape</span>)
33:     <span class="ruby-comment cmt"># Hash containing the required conversion</span>
34:     <span class="ruby-identifier">conversions</span> = {
35:        <span class="ruby-regexp re">%r{'}</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">'%26apos;'</span>
36:     }  
37:     <span class="ruby-identifier">escaped_str</span> = <span class="ruby-identifier">str_to_escape</span>
38:     <span class="ruby-identifier">conversions</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span><span class="ruby-operator">|</span>
39:       <span class="ruby-identifier">escaped_str</span> = <span class="ruby-identifier">escaped_str</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>)
40:     <span class="ruby-keyword kw">end</span>  
41:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">escaped_str</span>
42:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000192" class="method-detail">
        <a name="M000192"></a>

        <div class="method-heading">
          <a href="#M000192" class="method-signature">
          <span class="method-name">escape_xml_attribute_values</span><span class="method-args">(string_to_escape,for_data_url)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
This function helps you escape special characters in XML attribute values
Here, we have escaped only single quotes for xml attribute values You can
escape other characters which might be causing issues as xml attribute
values
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000192-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000192-source">
<pre>
    <span class="ruby-comment cmt"># File lib/xml_helper.rb, line 5</span>
 5:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">XmlHelper</span>.<span class="ruby-identifier">escape_xml_attribute_values</span>(<span class="ruby-identifier">string_to_escape</span>,<span class="ruby-identifier">for_data_url</span>)
 6:     <span class="ruby-identifier">escaped_str</span>= <span class="ruby-identifier">string_to_escape</span>
 7:     <span class="ruby-comment cmt"># In case of inline xml, we need to escape the single quotes</span>
 8:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">for_data_url</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">false</span>
 9:       <span class="ruby-identifier">escaped_str</span> = <span class="ruby-identifier">escaped_str</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">%r{'}</span>,<span class="ruby-value str">'%26apos;'</span>);
10:     <span class="ruby-keyword kw">end</span>
11:     <span class="ruby-comment cmt"># Common Replacements</span>
12:     <span class="ruby-comment cmt"># In Ruby On Rails, the builder automatically escapes &lt; , &gt;, %</span>
13:     <span class="ruby-comment cmt"># Hence these replacements are not required</span>
14:     
15:     <span class="ruby-comment cmt">#We've not considered any special characters here. </span>
16:     <span class="ruby-comment cmt">#You can add them as per your language and requirements.</span>
17:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">escaped_str</span>
18:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>